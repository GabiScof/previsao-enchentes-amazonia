
/* Merged Plone Javascript file
 * This file is dynamically assembled from separate parts.
 * Some of these parts have 3rd party licenses or copyright information attached
 * Such information is valid for that section,
 * not for the entire composite file
 * originating files are separated by - filename.js -
 */

/* - ++resource++jquery.cookie.js - */
// http://www.obt.inpe.br/OBT/portal_javascripts/++resource++jquery.cookie.js?original=1
(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory)} else{factory(jQuery)}}(function($){var pluses=/\+/g;
function raw(s){return s}
function decoded(s){return decodeURIComponent(s.replace(pluses,' '))}
function converted(s){if(s.indexOf('"')===0){s=s.slice(1,-1).replace(/\\"/g, '"').replace(/\\\\/g, '\\')}
try{return config.json?JSON.parse(s):s} catch(er){}}
var config=$.cookie=function(key,value,options){if(value!==undefined){options=$.extend({},config.defaults,options);if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setDate(t.getDate()+days)}
value=config.json?JSON.stringify(value):String(value);return(document.cookie=[config.raw?key:encodeURIComponent(key),'=',config.raw?value:encodeURIComponent(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join(''))}
var decode=config.raw?raw:decoded;var cookies=document.cookie.split('; ');var result=key?undefined:{};for(var i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split('=');var name=decode(parts.shift());var cookie=decode(parts.join('='));if(key&&key===name){result=converted(cookie);break}
if(!key){result[name]=converted(cookie)}}
return result};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)!==undefined){$.cookie(key,'',$.extend({},options,{expires:-1}));return true}
return false}}));

/* - ++resource++contraste.js - */
// http://www.obt.inpe.br/OBT/portal_javascripts/++resource++contraste.js?original=1
jQuery(function($){$('#siteaction-contraste a').click(
function(e){if($.cookie('contraste')===null){$.cookie('contraste','on');$('body').addClass('contraste');e.preventDefault();return false}else{if($.cookie('contraste')=='on'){$.cookie('contraste','off');$('body').removeClass('contraste');e.preventDefault();return false}else{$.cookie('contraste','on');$('body').addClass('contraste');e.preventDefault();return false}}});if($.cookie('contraste')=='on'){$('body').addClass('contraste');return false}});

/* - ++resource++brasil.gov.portal/js/main.js - */
// http://www.obt.inpe.br/OBT/portal_javascripts/++resource++brasil.gov.portal/js/main.js?original=1
var PBrasil={init: function(){this.main();this.addClassHtml();this.onclickBuscar();this.bugfixBase();this.carregaDestaques();this.bugfixQuerywidget()},main: function(){$('.portletNavigationTree .portletHeader').click(function(){$(this).toggleClass('ativo');$(this).next().slideToggle()});var menuTrigger=$(".menuTrigger");var navigationEl=$("#navigation");menuTrigger.click(function(e){e.preventDefault();navigationEl.toggleClass("ativo")});var sectionTrigger=$(".mobile .portletNavigationTree dt a");sectionTrigger.append("<span></span>");sectionTrigger.click(function(e){e.preventDefault();$(this).parent().parent().toggleClass("ativo")});$("ul li:last-child").addClass("last-item");var responsiveResize,root;root=typeof exports!=="undefined"&&exports!==null?exports:this;root.ResponsiveResize=function(){var _Singleton,_base;_Singleton=(function(){
function _Singleton(){}
_Singleton.prototype.perspectiva_anterior='';_Singleton.prototype.scrollbar=false;_Singleton.prototype.resize=function(){var perspectiva_atual;if($(window).width()<=480){perspectiva_atual='mobile'} else{perspectiva_atual='desktop'}
if(this.perspectiva_anterior!==perspectiva_atual){this.perspectiva_anterior=perspectiva_atual;if(perspectiva_atual==='mobile'){$("body").addClass("mobile")} else{$("body").removeClass("mobile")}}};return _Singleton})();if((_base=root.ResponsiveResize).instance===undefined){_base.instance=new _Singleton()}
return root.ResponsiveResize.instance};var resize=function(){responsiveResize=new root.ResponsiveResize();responsiveResize.resize()};$(window).resize(function(){resize()});resize();$('.newsImageContainer .photo-icon').on('click', function(e){e.preventDefault();$('#parent-fieldname-image').trigger('click')})},addClassHtml: function(){$("#portal-column-one div:first-child").addClass("first-item");var firstNavigation=$("#portal-column-one .portletWrapper .portletNavigationTree")[0];if(firstNavigation){$(firstNavigation).addClass("first-item-nav");var firstNavigationTitle=$("#portal-column-one .portletWrapper .portletNavigationTree .portletHeader")[0];if(firstNavigationTitle.textContent.indexOf('Menu de relevância')>1){$(firstNavigation).parent('div').addClass("nav-menu-de-relevancia")}}
if($('.link-externo').length>0){$('.link-externo .collection-item:even').addClass('even');$('.link-externo .collection-item:odd').addClass('odd')}},onclickBuscar: function(){$('#link-buscar').click(function(e){e.preventDefault();window.location.hash='#portal-searchbox';$('.searchField').focus()})},bugfixQuerywidget: function(){if($(".QueryWidget").length===0){return false}
$.querywidget.init();$('#sort_on').val($('#form-widgets-sort_on').val());if($('#form-widgets-sort_reversed-0').attr('checked')){$('#sort_order').attr('checked',true)} else{$('#sort_order').attr('checked',false)}
$("#sort_on").live('click', function(){$('#form-widgets-sort_on').val($(this).val())});$("#sort_order").live('click', function(){if($(this).is(":checked")){$('#form-widgets-sort_reversed-0').attr('checked',true)} else{$('#form-widgets-sort_reversed-0').attr('checked',false)}});$('#formfield-form-widgets-sort_on').hide();$('#formfield-form-widgets-sort_reversed').hide()},bugfixBase: function(){if($("base").length>0&&$(".userrole-anonymous").length>0){var aCurrentUrl=document.location.href.match(/(^[^#]*)/);$("base").attr("href",aCurrentUrl[1])}},carregaDestaques: function(){if($('#featured-content').length>0){$('#featured-content').load(portal_url+'/destaques?ajax_load=1 #content #em-destaque')}},albuns:{fixAlbumHeight: function(){if($('.template-galeria_de_albuns').length>0){var albumResponsiveResize,root;root=typeof exports!=="undefined"&&exports!==null?exports:this;root.AlbumResponsiveResize=function(){var _Singleton,_base;_Singleton=(function(){
function _Singleton(){}
_Singleton.prototype.qtd_coluna_anterior='';_Singleton.prototype.scrollbar=false;_Singleton.prototype.resize=function(){var qtd_coluna_atual;qtd_coluna_atual=1;if($(window).width()>480){qtd_coluna_atual=2}
if($(window).width()>960){qtd_coluna_atual=3}
if(this.qtd_coluna_anterior!==qtd_coluna_atual){this.qtd_coluna_anterior=qtd_coluna_atual;var top=0;var height=0;var lilist=[];var $item,$lilist;$('#gallery_albums li').each(function(index,item){$item=$(item);$item.height('auto')});$('#gallery_albums li').each(function(index,item){$item=$(item);if((top>0)&&(top!=$item.offset().top)){$lilist=$(lilist);$lilist.height(height);top=0;height=0;lilist=[]}
top=$item.offset().top;lilist.push(item);if($item.height()>height){height=$item.height()}});$lilist=$(lilist);$lilist.height(height)}};return _Singleton})();if((_base=root.AlbumResponsiveResize).instance===undefined){_base.instance=new _Singleton()}
return root.AlbumResponsiveResize.instance};var resize=function(){albumResponsiveResize=new root.AlbumResponsiveResize();albumResponsiveResize.resize()};$(window).resize(function(){resize()});resize()}}}};jQuery(document).ready(function($){"use strict";PBrasil.init()});$(window).load(function(){PBrasil.albuns.fixAlbumHeight()});

/* - ++resource++brasil.gov.portlets/js/main.js - */
// http://www.obt.inpe.br/OBT/portal_javascripts/++resource++brasil.gov.portlets/js/main.js?original=1
var root=typeof exports!=="undefined"&&exports!==null?exports:this;$(function(){portletsManager.init();portlets.init()});var portletsManager={init: function(){this.collection();this.audiogallery();this.video();this.videogallery();this.mediacarousel()},collection: function(){if($('h1.documentFirstHeading').text().indexOf('Portal Padrão Coleção')>0){var update_image=function(){if($('#form\\.show_image').is(':checked')){$('#formfield-form-image_size').show()} else{$('#formfield-form-image_size').hide()}};var update_footer=function(){if($('#form\\.show_footer').is(':checked')){$('#formfield-form-footer').show();$('#formfield-form-footer_url').show()} else{$('#formfield-form-footer').hide();$('#formfield-form-footer_url').hide()}};var update_date=function(){if($('#form\\.show_date').is(':checked')){$('#formfield-form-show_time').show()} else{$('#formfield-form-show_time').hide()}}
var insert_collection_warning=function(){var html='<div>'+'    <span class="warning">'+'        ATENÇÃO: Para coleções de Evento ou Compromisso (Agenda), será utilizada a data do Evento/Compromisso para ordenação e exibição, e não a data informada na coleção.'+'     </span>'+'</div>';$('#formfield-form-collection fieldset').append(html)}
$('#form\\.show_image').on('click',update_image);$('#form\\.show_footer').on('click',update_footer);$('#form\\.show_date').on('click',update_date);update_image();update_footer();update_date();insert_collection_warning()}},audiogallery: function(){if($('h1.documentFirstHeading').text().indexOf('Portal Padrão Galeria de Áudios')>0){var update_title=function(){if($('#form\\.show_header').is(':checked')){$('#formfield-form-header').show();$('#formfield-form-header_type').show()} else{$('#formfield-form-header').hide();$('#formfield-form-header_type').hide()}};var update_footer=function(){if($('#form\\.show_footer').is(':checked')){$('#formfield-form-footer').show();$('#formfield-form-footer_url').show()} else{$('#formfield-form-footer').hide();$('#formfield-form-footer_url').hide()}};$('#form\\.show_header').on('click',update_title);$('#form\\.show_footer').on('click',update_footer);update_title();update_footer()}},video: function(){if($('h1.documentFirstHeading').text().indexOf('Portal Padrão Vídeo')>0){var update_title=function(){if($('#form\\.show_header').is(':checked')){$('#formfield-form-header').show()} else{$('#formfield-form-header').hide()}};$('#form\\.show_header').on('click',update_title);update_title()}},videogallery: function(){if($('h1.documentFirstHeading').text().indexOf('Portal Padrão Galeria de Vídeos')>0){var update_header=function(){if($('#form\\.show_header').is(':checked')){$('#formfield-form-header').show();$('#formfield-form-header_type').show()} else{$('#formfield-form-header').hide();$('#formfield-form-header_type').hide()}};var update_footer=function(){if($('#form\\.show_footer').is(':checked')){$('#formfield-form-footer').show();$('#formfield-form-footer_url').show()} else{$('#formfield-form-footer').hide();$('#formfield-form-footer_url').hide()}};$('#form\\.show_header').on('click',update_header);$('#form\\.show_footer').on('click',update_footer);update_header();update_footer()}},mediacarousel: function(){if($('h1.documentFirstHeading').text().indexOf('Portal Padrão Carrossel de Imagens')>0){var update_header=function(){if($('#form\\.show_header').is(':checked')){$('#formfield-form-header').show();$('#formfield-form-header_type').show()} else{$('#formfield-form-header').hide();$('#formfield-form-header_type').hide()}};var update_footer=function(){if($('#form\\.show_footer').is(':checked')){$('#formfield-form-footer').show();$('#formfield-form-footer_url').show()} else{$('#formfield-form-footer').hide();$('#formfield-form-footer_url').hide()}};$('#form\\.show_header').on('click',update_header);$('#form\\.show_footer').on('click',update_footer);update_header();update_footer()}},};var portlets={init: function(){this.audio();this.audiogallery();this.videogallery();this.mediacarousel();this.cycle2()},audio: function(){if(!$.fn.audio_player){
function AudioPlayer(audio_element,conf){var self=this,cssSelectorAncestor=conf.cssSelectorAncestor,ae=audio_element;$.extend(self,{init: function(){var audio_url=self.get_audio_url();var media=self.get_media(audio_url);ae.jPlayer({ready: function(){$(this).jPlayer("setMedia",media.media_urls)},swfPath:"/++resource++brasil.gov.portlets/js",supplied:media.supplied,cssSelectorAncestor:cssSelectorAncestor,solution:"html,flash",wmode:"window",preload:"none"})},get_media: function(urls){var media={'media_urls':{},'supplied':''};var media_type,url,_i,_len;urls=urls.split(';');for(_i=0,_len=urls.length;_i<_len;_i++){url=urls[_i];media_type=self.get_media_type(url);if(media_type){media['media_urls'][media_type]=url;if(media['supplied']){media['supplied']+=', '}
media['supplied']+=media_type}}
return media},get_audio_url: function(){var url=conf.audio_url?conf.audio_url:ae.data('audio-url');return url},get_media_type: function(url){var mediaType=false;if(/\.mp3$/i.test(url)){mediaType='mp3'} else if(/\.mp4$/i.test(url)||/\.m4v$/i.test(url)){mediaType='m4v'} else if(/\.m4a$/i.test(url)){mediaType='m4a'} else if(/\.ogg$/i.test(url)||/\.oga$/i.test(url)){mediaType='oga'} else if(/\.ogv$/i.test(url)){mediaType='ogv'} else if(/\.webm$/i.test(url)){mediaType='webmv'}
return mediaType},update_player: function(new_url){conf.audio_url=new_url;var audio_url=self.get_audio_url();var media=self.get_media(audio_url);ae.jPlayer("clearMedia");ae.jPlayer("option",'swfPath','/++resource++brasil.gov.portlets/js');ae.jPlayer("option","supplied",media.supplied);ae.jPlayer("setMedia",media.media_urls)}});self.init()}
$.fn.audio_player=function(options){var el=this.data("audio_player");if(el){return el}
var default_settings=this.data('audio_player-settings');var settings='';if(default_settings){settings=default_settings} else{settings={'cssSelectorAncestor':'#jp_container_1',}}
if(options){$.extend(settings,options)}
return this.each(function(){el=new AudioPlayer($(this),settings);$(this).data("audio_player",el)})}}
$('.portal-padrao-audio-portlet').each(function(){var playerid=$('#'+this.id+' .jp-jplayer')[0].id;var containerid=$('#'+this.id+' .jp-audio')[0].id;$('#'+playerid).audio_player({'cssSelectorAncestor':'#'+containerid})})},audiogallery: function(){if(!$.fn.audiogallery){
function AudioGallery(gallery){var self=this,gallery_obj=gallery,player=gallery_obj.find('.jp-jplayer'),ancestor='#'+gallery_obj.find('.jp-audio').attr('id');$.extend(self,{init: function(){self.bind_events();player.audio_player({'cssSelectorAncestor':ancestor})},bind_events: function(){var links=gallery_obj.find('.audiogallery-item');links.click(function(e){e.preventDefault();self.update($(this).attr('href'));links.parent('li').removeClass('selected');$(this).parent('li').addClass('selected');gallery_obj.find('.audiogallery-item-title').html($(this).html())})},update: function(url){var p=player.audio_player({'cssSelectorAncestor':ancestor});p.update_player(url)}});self.init()}
$.fn.audiogallery=function(){var el=this.data("audiogallery");if(el){return el}
var default_settings=this.data('audiogallery-settings');return this.each(function(){el=new AudioGallery($(this));$(this).data("audiogallery",el)})}}
$('.portal-padrao-audiogallery-portlet').each(function(){$('#'+this.id).audiogallery()})},videogallery: function(){var fix_player_size=function(){$('.portal-padrao-videogallery-portlet').each(function(){var $portlet=$(this);$('.portlet-videogallery-player',$portlet).each(function(){var $container=$(this);var $player=$('iframe',$container);var width=parseInt($container.width())-(parseInt($container.css('padding-left')) * 2);var height=parseInt(width * 10/16);$player.width(width);$player.height(height)})})};$(window).resize(fix_player_size);fix_player_size()},mediacarousel: function(){var fix_player_size=function(){$('.portal-padrao-mediacarousel-portlet').each(function(){var $portlet=$(this);$('.portlet-mediacarousel-player',$portlet).each(function(){var $container=$(this);var $player=$('img',$container);var width=$container.width();var height=parseInt(width * 10/16);$player.css('max-height',height)})})};$(window).resize(fix_player_size);fix_player_size()},cycle2: function(){if(!root.cycle2_loaded){root.cycle2_loaded=true;var obj=this;$('.cycle-slideshow').on('cycle-next cycle-prev', function(e,opts){var $galeria=$(this).parent().parent();var $slideshows=$('.cycle-slideshow',$galeria);$slideshows.not(this).cycle('goto',opts.currSlide);obj.layoutAdjustment($galeria,opts.currSlide)});$('.cycle-carrossel .thumb-itens').click(function(e){e.preventDefault();var $thumbs=$(this).parent().parent();var $galeria=$thumbs.parent().parent();var $slideshows=$('.cycle-slideshow',$galeria);var index=$thumbs.data('cycle.API').getSlideIndex(this);$slideshows.cycle('goto',index);obj.layoutAdjustment($galeria,index)});$('.cycle-pager .thumb-itens').click(function(e){e.preventDefault();var $thumbs=$(this).parent().parent();var $galeria=$thumbs.parent().parent();var $slideshows=$('.cycle-slideshow',$galeria);var index=parseInt($(this).data('slide-index'));$slideshows.cycle('goto',index);obj.layoutAdjustment($galeria,index)});$(document.documentElement).keyup(function(event){if(event.keyCode==37){$('.cycle-prev').trigger('click')} else if(event.keyCode==39){$('.cycle-next').trigger('click')}});$('.cycle-slideshow').each(function(){var $galeria=$(this).parent().parent();obj.layoutAdjustment($galeria,0)})}},layoutAdjustment: function($galeria,index){var aElem=$(".cycle-player .cycle-slide",$galeria),elem,novaaltura,alturaimagem,larguracarosel;index=index+1;elem=aElem[index],novaaltura=$(elem).height();alturaimagem=$('.cycle-sentinel img',$galeria).height();if($('.carousel',$galeria).length!=0){larguracarosel=($('.carousel',$galeria).width()-(36 * 2))}
if($('.portlet-mediacarousel-carousel',$galeria).length!=0){larguracarosel=($('.portlet-mediacarousel-carousel',$galeria).width()-(32 * 2))}
$('.cycle-sentinel',$galeria).height(novaaltura);$('.cycle-hover',$galeria).height(alturaimagem);$('.cycle-carrossel',$galeria).width(larguracarosel)},};
